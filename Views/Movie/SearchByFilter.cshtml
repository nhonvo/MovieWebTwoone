@model PagedList.IPagedList<MovieWeb.Models.Phim>
@using PagedList.Mvc;


@{
    ViewBag.Title = "Twoone";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="hero common-hero">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="hero-ct">
                    <h1> Danh sách phim - danh sách</h1>
                    <ul class="breadcumb">
                        <li class="active"><a href="@Url.Action("Home","Movie")">Home</a></li>
                        <li> <span class="ion-ios-arrow-right"></span> movie listing</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="page-single ">
    <div class="container">
        <div class="row ipad-width2">
            <div class="col-md-8 col-sm-12 col-xs-12">

                <div class="topbar-filter">
                    <p>Đã tìm thấy <span>@ViewBag.SL</span> phim</p>
                    <div class="dropdown first">
                        <a class="btn btn-default dropdown-toggle lv1" data-toggle="dropdown" data-hover="dropdown">
                            Sắp xếp<i class="fa fa-angle-down" aria-hidden="true"></i>
                        </a>
                        <ul class="dropdown-menu level1">
                            <li value="popularity" class="dropdown">@Html.ActionLink("A-Z", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid })</li>
                            <li value="popularity" class="dropdown">@Html.ActionLink("Z-A", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "name_desc" })</li>
                            <li value="rating" class="dropdown">@Html.ActionLink("Năm phát hành tăng dần", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "date" })</li>
                            <li value="rating" class="dropdown">@Html.ActionLink("Năm phát hành giảm dần", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "date_desc" })</li>

                            <li value="date" class="dropdown">@Html.ActionLink("IMDB tăng dần", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "IMDB" })</li>
                            <li value="date" class="dropdown">@Html.ActionLink("IMDB giảm dần", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "IMDB_desc" })</li>
                            <li value="date" class="dropdown">@Html.ActionLink("Lượt xem tăng dần", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "View" })</li>
                            <li value="date" class="dropdown">@Html.ActionLink("Lượt xem giảm dần", "SearchByFilter", new { Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = "View_desc" })</li>
                        </ul>
                    </div>
                    <a href="@Url.Action("SearchByFilter", "Movie",new {  Ten = ViewBag.Ten, MaTheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = false,sortOrder =ViewBag.Order })"><i class="ion-ios-list-outline "></i></a>
                    <a href="@Url.Action("SearchByFilter", "Movie",new { Ten = ViewBag.Ten, TheLoai = ViewBag.TheLoai, MaNuoc = ViewBag.DatNuoc, MaNgonNgu = ViewBag.NgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = true ,sortOrder =ViewBag.Order})"><i class="ion-grid active"></i></a>
                </div>

                @if (ViewBag.Grid)
                {
                    <div class="flex-wrap-movielist">
                        @foreach (var item in Model)
                        {
                            <div class="movie-item-style-2 movie-item-style-1">
                                <img src="~/Content/MoviePosters/@item.HinhBanner" alt="">
                                <div class="hvr-inner">
                                    <a href="@Url.Action("MovieDetail", "Movie", new { id = item.MaPhim})"> Xem thêm <i class="ion-android-arrow-dropright"></i> </a>
                                </div>
                                <div class="mv-item-infor">

                                    <h6><a href="#">@item.TenPhim</a></h6>
                                    <p class="rate"><i class="ion-android-star"></i><span>@item.DiemIMDB</span> /10</p>
                                </div>
                            </div>
                        }
                    </div>
                }
                else
                {
                    foreach (var item in Model)
                    {
                        <div class="movie-item-style-2">
                            <img src="~/Content/MoviePosters/@item.HinhBanner" alt="">
                            <div class="mv-item-infor">
                                <h6><a href="@Url.Action("MovieDetail", "Movie", new { id = item.MaPhim})">@item.TenPhim <span>@item.NgaySanXuat.Value.Year</span></a></h6>
                                <p class="rate"><i class="ion-android-star"></i><span>@item.DiemIMDB</span> /10</p>
                                <p class="describe">@item.NoiDungPhimTomTat</p>
                                    <a href="@Url.Action("MovieGird", "Movie", new { id = item.MaPhim})" style="color:yellow"> Xem thêm <i class="ion-android-arrow-dropright"></i> </a>
                                </div>
                            </div>
                    }
                }
                <div class="topbar-filter">
                    <span style="color: white">Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) của @Model.PageCount:</span>
                    <div class="pagination2">
                        @Html.PagedListPager(Model, page => Url.Action("SearchByFilter", "Movie", new { page = page, Ten = ViewBag.Ten, MaMaTheLoai = ViewBag.MaTheLoai, MaNuoc = ViewBag.MaNuoc, MaNgonNgu = ViewBag.MaNgonNgu, dIMDB = ViewBag.DIMDB, From = ViewBag.From, To = ViewBag.To, Grid = ViewBag.Grid, sortOrder = ViewBag.Order }), PagedListRenderOptions.OnlyShowFivePagesAtATime)
                    </div>
                </div>


            </div>

            <div class="col-md-4 col-sm-12 col-xs-12">
                <div class="sidebar">
                    <div class="searh-form">
                        <h4 class="sb-title">Tìm kiếm nâng cao</h4>
                        @using (Html.BeginForm("SearchByFilter", "Movie", new { Grid = ViewBag.Grid, sortOrder = ViewBag.Order }, FormMethod.Get, new { @class = "form-style-1" }))
                        {
                            <div class="row">
                                <div class="col-md-12 form-it">
                                    <label>Tên phim</label>
                                    <input type="text" placeholder="Gõ từ khoá ..." name="Ten" value="@ViewBag.Ten">
                                </div>
                                <div class="col-md-12 form-it">
                                    <label>Thể loại</label>
                                    <div class="group-ip">
                                        @Html.DropDownList("MaTheLoai", null, "Chọn thể loại", htmlAttributes: new { @class = "form-control" })
                                    </div>

                                </div>
                                <div class="col-md-12 form-it">
                                    <label>Quốc gia</label>
                                    <div class="group-ip">
                                        @Html.DropDownList("MaNuoc", null, "Chọn quốc gia", htmlAttributes: new { @class = "form-control" })
                                    </div>

                                </div>
                                <div class="col-md-12 form-it">
                                    <label>Ngôn ngữ</label>
                                    <div class="group-ip">
                                        @Html.DropDownList("MaNgonNgu", null, "Chọn ngôn ngữ", htmlAttributes: new { @class = "form-control" })
                                    </div>

                                </div>
                                <div class="col-md-12 form-it">
                                    <label>IMDB</label>

                                    <select name="dIMDB">
                                        <option value="">Chọn</option>
                                        <option value=1>1-2</option>
                                        <option value=2>2-3</option>
                                        <option value=3>3-4</option>
                                        <option value=4>4-5</option>
                                        <option value=5>5-6</option>
                                        <option value=6>6-7</option>
                                        <option value=7>7-8</option>
                                        <option value=8>8-9</option>
                                        <option value=9>9-10</option>
                                    </select>

                                </div>
                                <div class="col-md-12 form-it">
                                    <label>Năm phát hành</label>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <select name="From">
                                                <option value=@ViewBag.From placeholder="From">@ViewBag.From</option>
                                                @for (int i = 1900; i <= DateTime.Now.Year; i++)
                                                {
                                                    <option value=@i>@i</option>
                                                }
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <select name="To">
                                                <option value=@ViewBag.To placeholder="To">@ViewBag.To</option>
                                                @for (int i = DateTime.Now.Year; i >= 1900; i--)
                                                {
                                                    <option value="@i">@i</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 ">
                                    <input class="submit" type="submit" value="Tìm">
                                </div>
                            </div>
                        }
                    </div>

                            <div id="fb-root"></div>
                            <script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v14.0&appId=689125921801226&autoLogAppEvents=1" nonce="W9mqCUoY"></script>
                            <div class="sb-facebook sb-it">
                                <h4 class="sb-title">Facebook của Twoone</h4>
                                <div class="fb-page" data-href="https://www.facebook.com/Twoone-103646042401175" data-tabs="Twoone" data-width="300" data-height="315" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true">
                                    <blockquote cite="https://www.facebook.com/Twoone-103646042401175" class="fb-xfbml-parse-ignore">
                                        <a href="https://www.facebook.com/Twoone-103646042401175">Twoone</a>
                                    </blockquote>
                                </div>
                            </div>
                            <div class="sb-twitter sb-it">
                                <h4 class="sb-title">Tweet của Twoone</h4>
                                <div class="slick-tw">
                                    <div class="tweet item" id="599202861751410688">
                                    </div>
                                    <div class="tweet item" id="297462728598122498">
                                    </div>
                                </div>
                            </div>
                </div>
            </div>

        </div>
    </div>
</div>
@*<script type="text/javascript">
        function GoHome() {
            var selectBox = document.getElementById("selectBox");
            var selectedValue = selectBox.options[selectBox.selectedIndex].value;
            alert(selectedValue);
            alert("hi")
          //  window.location.href = "@Url.Action("Home","Movie")";
        }
    </script>*@